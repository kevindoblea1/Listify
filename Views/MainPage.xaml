<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:Listify.ViewModels"
             x:Class="Listify.Views.MainPage"
             Title="Listify">

    <VerticalStackLayout Padding="10" Spacing="10">

        <Entry Placeholder="Buscar artículo..."
               Text="{Binding TextoBusqueda}" />

        <Entry Placeholder="Nuevo artículo"
               Text="{Binding NombreNuevaCompra}" />

        <Button Text="Agregar"
                Command="{Binding AgregarCommand}" />

        <CollectionView ItemsSource="{Binding Compras}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <SwipeView>
                        <SwipeView.RightItems>
                            <SwipeItems>
                                <SwipeItem Text="Eliminar"
                                           BackgroundColor="Red"
                                           Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:MainPageViewModel}}, Path=EliminarCommand}"
                                           CommandParameter="{Binding .}" />
                            </SwipeItems>
                        </SwipeView.RightItems>

                        <Grid Padding="10" ColumnDefinitions="Auto,*" ColumnSpacing="10">
                            <CheckBox Grid.Column="0"
          IsChecked="{Binding EstaComprado}"
          CheckedChanged="CheckBox_CheckedChanged"
          BindingContextChanged="CheckBox_BindingContextChanged" />

                            <Label Grid.Column="1"
                                   Text="{Binding Nombre}"
                                   VerticalOptions="Center"
                                   TextDecorations="{Binding EstaComprado, Converter={StaticResource BooleanToTextDecorationConverter}}" />
                        </Grid>
                    </SwipeView>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </VerticalStackLayout>
</ContentPage>
